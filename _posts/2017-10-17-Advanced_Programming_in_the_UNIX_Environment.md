---
layout: post
title: "《UNIX环境高级编程》读书笔记"
categories: 笔记
---
* content
{:toc}
《UNIX环境高级编程》读书笔记





# 第一章 UNIX基础知识
- shell：命令行解释器，是一个特殊的应用程序，为运行其他的应用程序提供接口
- 只有'/'和' '
- 不带缓冲的I/O：open、read、write、lseek和close，这些函数都使用文件描述符
- 标准I/O函数为那些不带缓冲的I/O函数提供了一个带缓冲的接口,这样我们就不必担心最佳缓冲区的大小
- 使用long保存getpid的返回值可以提高可移植性
- fgets返回的每一行都是以换行符结束的
- fork对父进程返回子进程的pid(非负整数)，对子进程返回0
- 一个进程内的所有线程共享同一个地址空间、文件描述符、栈以及与进程相关的属性
- fork、exec和waitpid是对进程管理的一套函数，注意不是线程
- 当UNIX系统函数出错时，通常会返回一个负值，并设置errno为特定信息的值；对于返回指针的函数出错时会返回NULL
- 使用errno的规则
    - 如果没有出错，其值不会被清除。因此只有在函数返回值指明出错时才检查其值
    - 任何函数都不会将errno的值置为0
- `char *strerror(int errnum)`:返回errnum对应的错误信息
- `void perror(char *msg)`:在标准错误上输出：msg+冒号+空格+错误信息+换行
- 出错恢复
    - 致命性错误：记录日志然后退出，什么也恢复不了
    - 非致命性错误：与资源相关时，典型的操作是等待一段时间重试
- 信号用于通知进程发生了某种情况
    - 处理信号的方式
        - 忽略信号,不推荐使用这种方式
	- 按照系统默认的方式处理
	- 提供一个函数，信号发生时调用该函数,不能够捕获SIGKILL和SIGSTOP
    - 产生信号的方式
        - 通过中断键和退出键
	- 通过kill发送信号，注意只有超级用户和进程所有者才可以给进程发送信号
- 时间值
    - 日历时间使用的是UTC，进程时间使用的是时钟滴答
    - 为一个进程维护了三个时间值
        - 时钟时间：进程运行的时间总量
	- 用户CPU时间：执行用户指令的时间总量
	- 系统CPU时间：执行系统调用的时间总量
    - 在shell中通过time命令可以度量进程的三个时间值
- 系统调用和库函数
    - UNIX为每个系统调用在libc中设置一个具有同样名字的函数

# 第二章 UNIX标准及实现

